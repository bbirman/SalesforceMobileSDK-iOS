Pod::Spec.new do |s|

  s.name         = "SalesforceSDKCore"
  s.version      = "10.2.0"
  s.summary      = "Salesforce Mobile SDK for iOS"
  s.homepage     = "https://github.com/forcedotcom/SalesforceMobileSDK-iOS"

  s.license      = { :type => "Salesforce.com Mobile SDK License", :file => "LICENSE.md" }
  s.author       = { "Kevin Hawkins" => "khawkins@salesforce.com" }

  s.platform     = :ios, "14.0"
  s.swift_versions = ['5.0']

  s.source       = { :git => "https://github.com/forcedotcom/SalesforceMobileSDK-iOS.git",
                     :tag => "v#{s.version}",
                     :submodules => true }

  s.frameworks   = 'CoreTelephony'

  s.requires_arc = true
  s.default_subspec  = 'SalesforceSDKCore'

  s.subspec 'SalesforceSDKCore' do |sdkcore|

      sdkcore.dependency 'SalesforceAnalytics', "~>#{s.version}"
      sdkcore.libraries = 'z'
      sdkcore.resource_bundles = { 'SalesforceSDKResources' => [ 'shared/resources/SalesforceSDKResources.bundle/**' ] }
      sdkcore.resource = 'shared/resources/SalesforceSDKAssets.xcassets'

      # subspec for code that any of the source_files of no-arc depend on
      sdkcore.subspec 'base' do |sp|
          sp.source_files = 'libs/SalesforceSDKCore/SalesforceSDKCore/Classes/Common/SalesforceSDKConstants.h', 'libs/SalesforceSDKCore/SalesforceSDKCore/Classes/Common/NSData+SFAdditions.h', 'libs/SalesforceSDKCore/SalesforceSDKCore/Classes/Common/NSData+SFAdditions.m', 'libs/SalesforceSDKCore/SalesforceSDKCore/Classes/Common/NSString+SFAdditions.h', 'libs/SalesforceSDKCore/SalesforceSDKCore/Classes/Common/NSString+SFAdditions.m','libs/SalesforceSDKCore/SalesforceSDKCore/Classes/Common/NSNotificationCenter+SFAdditions.h', 'libs/SalesforceSDKCore/SalesforceSDKCore/Classes/Common/NSNotificationCenter+SFAdditions.m'
          sp.public_header_files = 'libs/SalesforceSDKCore/SalesforceSDKCore/Classes/Common/SalesforceSDKConstants.h', 'libs/SalesforceSDKCore/SalesforceSDKCore/Classes/Common/NSData+SFAdditions.h', 'libs/SalesforceSDKCore/SalesforceSDKCore/Classes/Common/NSString+SFAdditions.h','libs/SalesforceSDKCore/SalesforceSDKCore/Classes/Common/NSNotificationCenter+SFAdditions.h'
          sp.requires_arc = true
          sp.prefix_header_contents = '#import "SFSDKCoreLogger.h"', '#import "SalesforceSDKConstants.h"'
      end

      # subspec for code that doesn't support arc
      sdkcore.subspec 'no-arc' do |sp|
          sp.dependency 'SalesforceSDKCore/SalesforceSDKCore/base'
          sp.source_files = 'libs/SalesforceSDKCore/SalesforceSDKCore/Classes/Common/SFKeychainItemWrapper.h', 'libs/SalesforceSDKCore/SalesforceSDKCore/Classes/Common/SFKeychainItemWrapper+Internal.h', 'libs/SalesforceSDKCore/SalesforceSDKCore/Classes/Common/SFKeychainItemWrapper.m'
          sp.public_header_files = 'libs/SalesforceSDKCore/SalesforceSDKCore/Classes/Common/SFKeychainItemWrapper.h'
          sp.requires_arc = false
          sp.prefix_header_contents = '#import "SFSDKCoreLogger.h"', '#import "SalesforceSDKConstants.h"'
      end

      # subspec for everything else
      # exclude_files should be the source_files from the base subspec plus the ones from the arc subspec
      # public_header_files is automatically populated by update_podspec_headers.sh which is run when building SalesforceSDKCore
      sdkcore.subspec 'arc' do |sdkcore|
          sdkcore.dependency 'SalesforceSDKCore/SalesforceSDKCore/base'
          sdkcore.dependency 'SalesforceSDKCore/SalesforceSDKCore/no-arc'
          sdkcore.source_files = 'libs/SalesforceSDKCore/SalesforceSDKCore/Classes/**/*.{h,m,swift}', 'libs/SalesforceSDKCore/SalesforceSDKCore/SalesforceSDKCore.h'
          sdkcore.exclude_files = 'libs/SalesforceSDKCore/SalesforceSDKCore/Classes/Common/SalesforceSDKConstants.h', 'libs/SalesforceSDKCore/SalesforceSDKCore/Classes/Common/NSData+SFAdditions.h', 'libs/SalesforceSDKCore/SalesforceSDKCore/Classes/Common/NSData+SFAdditions.m', 'libs/SalesforceSDKCore/SalesforceSDKCore/Classes/Common/NSString+SFAdditions.h', 'libs/SalesforceSDKCore/SalesforceSDKCore/Classes/Common/NSString+SFAdditions.m','libs/SalesforceSDKCore/SalesforceSDKCore/Classes/Common/NSNotificationCenter+SFAdditions.h', 'libs/SalesforceSDKCore/SalesforceSDKCore/Classes/Common/NSNotificationCenter+SFAdditions.m', 'libs/SalesforceSDKCore/SalesforceSDKCore/Classes/Common/SFKeychainItemWrapper.h', 'libs/SalesforceSDKCore/SalesforceSDKCore/Classes/Common/SFKeychainItemWrapper+Internal.h', 'libs/SalesforceSDKCore/SalesforceSDKCore/Classes/Common/SFKeychainItemWrapper.m'
          sdkcore.public_header_files = 'libs/SalesforceSDKCore/SalesforceSDKCore.h','libs/SalesforceSDKCore/SalesforceSDKCore/Public/NSArray+SFAdditions.h','libs/SalesforceSDKCore/SalesforceSDKCore/Public/NSData+SFAdditions.h','libs/SalesforceSDKCore/SalesforceSDKCore/Public/NSData+SFSDKUtils.h','libs/SalesforceSDKCore/SalesforceSDKCore/Public/NSDictionary+SFAdditions.h','libs/SalesforceSDKCore/SalesforceSDKCore/Public/NSNotificationCenter+SFAdditions.h','libs/SalesforceSDKCore/SalesforceSDKCore/Public/NSObject+SFBlocks.h','libs/SalesforceSDKCore/SalesforceSDKCore/Public/NSString+SFAdditions.h','libs/SalesforceSDKCore/SalesforceSDKCore/Public/NSURL+SFAdditions.h','libs/SalesforceSDKCore/SalesforceSDKCore/Public/NSURL+SFStringUtils.h','libs/SalesforceSDKCore/SalesforceSDKCore/Public/NSURLResponse+SFAdditions.h','libs/SalesforceSDKCore/SalesforceSDKCore/Public/SFApplication.h','libs/SalesforceSDKCore/SalesforceSDKCore/Public/SFApplicationHelper.h','libs/SalesforceSDKCore/SalesforceSDKCore/Public/SFAuthErrorHandlerList.h','libs/SalesforceSDKCore/SalesforceSDKCore/Public/SFCryptChunks.h','libs/SalesforceSDKCore/SalesforceSDKCore/Public/SFDecryptStream.h','libs/SalesforceSDKCore/SalesforceSDKCore/Public/SFDefaultUserManagementDetailViewController.h','libs/SalesforceSDKCore/SalesforceSDKCore/Public/SFDefaultUserManagementListViewController.h','libs/SalesforceSDKCore/SalesforceSDKCore/Public/SFDefaultUserManagementViewController.h','libs/SalesforceSDKCore/SalesforceSDKCore/Public/SFDirectoryManager.h','libs/SalesforceSDKCore/SalesforceSDKCore/Public/SFEncryptionKey.h','libs/SalesforceSDKCore/SalesforceSDKCore/Public/SFFormatUtils.h','libs/SalesforceSDKCore/SalesforceSDKCore/Public/SFIdentityCoordinator.h','libs/SalesforceSDKCore/SalesforceSDKCore/Public/SFIdentityData.h','libs/SalesforceSDKCore/SalesforceSDKCore/Public/SFInactivityTimerCenter.h','libs/SalesforceSDKCore/SalesforceSDKCore/Public/SFInstrumentation.h','libs/SalesforceSDKCore/SalesforceSDKCore/Public/SFKeyStoreManager.h','libs/SalesforceSDKCore/SalesforceSDKCore/Public/SFLoginViewController.h','libs/SalesforceSDKCore/SalesforceSDKCore/Public/SFManagedPreferences.h','libs/SalesforceSDKCore/SalesforceSDKCore/Public/SFMethodInterceptor.h','libs/SalesforceSDKCore/SalesforceSDKCore/Public/SFNetwork.h','libs/SalesforceSDKCore/SalesforceSDKCore/Public/SFOAuthCoordinator.h','libs/SalesforceSDKCore/SalesforceSDKCore/Public/SFOAuthCredentials.h','libs/SalesforceSDKCore/SalesforceSDKCore/Public/SFOAuthInfo.h','libs/SalesforceSDKCore/SalesforceSDKCore/Public/SFOAuthOrgAuthConfiguration.h','libs/SalesforceSDKCore/SalesforceSDKCore/Public/SFOAuthSessionRefresher.h','libs/SalesforceSDKCore/SalesforceSDKCore/Public/SFPreferences.h','libs/SalesforceSDKCore/SalesforceSDKCore/Public/SFPushNotificationManager.h','libs/SalesforceSDKCore/SalesforceSDKCore/Public/SFRestAPI+Blocks.h','libs/SalesforceSDKCore/SalesforceSDKCore/Public/SFRestAPI+Files.h','libs/SalesforceSDKCore/SalesforceSDKCore/Public/SFRestAPI+Notifications.h','libs/SalesforceSDKCore/SalesforceSDKCore/Public/SFRestAPI+QueryBuilder.h','libs/SalesforceSDKCore/SalesforceSDKCore/Public/SFRestAPI.h','libs/SalesforceSDKCore/SalesforceSDKCore/Public/SFRestRequest.h','libs/SalesforceSDKCore/SalesforceSDKCore/Public/SFSDKAILTNPublisher.h','libs/SalesforceSDKCore/SalesforceSDKCore/Public/SFSDKAlertMessage.h','libs/SalesforceSDKCore/SalesforceSDKCore/Public/SFSDKAlertMessageBuilder.h','libs/SalesforceSDKCore/SalesforceSDKCore/Public/SFSDKAnalyticsPublisher.h','libs/SalesforceSDKCore/SalesforceSDKCore/Public/SFSDKAppConfig.h','libs/SalesforceSDKCore/SalesforceSDKCore/Public/SFSDKAppDelegate.h','libs/SalesforceSDKCore/SalesforceSDKCore/Public/SFSDKAppFeatureMarkers.h','libs/SalesforceSDKCore/SalesforceSDKCore/Public/SFSDKAsyncProcessListener.h','libs/SalesforceSDKCore/SalesforceSDKCore/Public/SFSDKAuthConfigUtil.h','libs/SalesforceSDKCore/SalesforceSDKCore/Public/SFSDKAuthHelper.h','libs/SalesforceSDKCore/SalesforceSDKCore/Public/SFSDKBatchRequest.h','libs/SalesforceSDKCore/SalesforceSDKCore/Public/SFSDKBatchResponse.h','libs/SalesforceSDKCore/SalesforceSDKCore/Public/SFSDKCollectionResponse.h','libs/SalesforceSDKCore/SalesforceSDKCore/Public/SFSDKCompositeRequest.h','libs/SalesforceSDKCore/SalesforceSDKCore/Public/SFSDKCompositeResponse.h','libs/SalesforceSDKCore/SalesforceSDKCore/Public/SFSDKCoreLogger.h','libs/SalesforceSDKCore/SalesforceSDKCore/Public/SFSDKCryptoUtils.h','libs/SalesforceSDKCore/SalesforceSDKCore/Public/SFSDKDevInfoViewController.h','libs/SalesforceSDKCore/SalesforceSDKCore/Public/SFSDKEventBuilderHelper.h','libs/SalesforceSDKCore/SalesforceSDKCore/Public/SFSDKInstrumentationHelper.h','libs/SalesforceSDKCore/SalesforceSDKCore/Public/SFSDKLoginFlowSelectionView.h','libs/SalesforceSDKCore/SalesforceSDKCore/Public/SFSDKLoginHost.h','libs/SalesforceSDKCore/SalesforceSDKCore/Public/SFSDKLoginHostDelegate.h','libs/SalesforceSDKCore/SalesforceSDKCore/Public/SFSDKLoginHostListViewController.h','libs/SalesforceSDKCore/SalesforceSDKCore/Public/SFSDKLoginHostStorage.h','libs/SalesforceSDKCore/SalesforceSDKCore/Public/SFSDKLoginViewControllerConfig.h','libs/SalesforceSDKCore/SalesforceSDKCore/Public/SFSDKNavigationController.h','libs/SalesforceSDKCore/SalesforceSDKCore/Public/SFSDKOAuth2.h','libs/SalesforceSDKCore/SalesforceSDKCore/Public/SFSDKPrimingRecordsResponse.h','libs/SalesforceSDKCore/SalesforceSDKCore/Public/SFSDKPushNotificationDecryption.h','libs/SalesforceSDKCore/SalesforceSDKCore/Public/SFSDKPushNotificationError.h','libs/SalesforceSDKCore/SalesforceSDKCore/Public/SFSDKPushNotificationFieldsConstants.h','libs/SalesforceSDKCore/SalesforceSDKCore/Public/SFSDKResourceUtils.h','libs/SalesforceSDKCore/SalesforceSDKCore/Public/SFSDKSalesforceAnalyticsManager.h','libs/SalesforceSDKCore/SalesforceSDKCore/Public/SFSDKSoqlBuilder.h','libs/SalesforceSDKCore/SalesforceSDKCore/Public/SFSDKSoslBuilder.h','libs/SalesforceSDKCore/SalesforceSDKCore/Public/SFSDKSoslReturningBuilder.h','libs/SalesforceSDKCore/SalesforceSDKCore/Public/SFSDKTestCredentialsData.h','libs/SalesforceSDKCore/SalesforceSDKCore/Public/SFSDKTestRequestListener.h','libs/SalesforceSDKCore/SalesforceSDKCore/Public/SFSDKUITableViewCell.h','libs/SalesforceSDKCore/SalesforceSDKCore/Public/SFSDKUserSelectionNavViewController.h','libs/SalesforceSDKCore/SalesforceSDKCore/Public/SFSDKUserSelectionTableViewController.h','libs/SalesforceSDKCore/SalesforceSDKCore/Public/SFSDKUserSelectionView.h','libs/SalesforceSDKCore/SalesforceSDKCore/Public/SFSDKViewController.h','libs/SalesforceSDKCore/SalesforceSDKCore/Public/SFSDKViewControllerConfig.h','libs/SalesforceSDKCore/SalesforceSDKCore/Public/SFSDKWebUtils.h','libs/SalesforceSDKCore/SalesforceSDKCore/Public/SFSDKWebViewStateManager.h','libs/SalesforceSDKCore/SalesforceSDKCore/Public/SFSDKWindowContainer.h','libs/SalesforceSDKCore/SalesforceSDKCore/Public/SFSDKWindowManager.h','libs/SalesforceSDKCore/SalesforceSDKCore/Public/SFSObjectTree.h','libs/SalesforceSDKCore/SalesforceSDKCore/Public/SFSecureEncryptionKey.h','libs/SalesforceSDKCore/SalesforceSDKCore/Public/SFUserAccount.h','libs/SalesforceSDKCore/SalesforceSDKCore/Public/SFUserAccountConstants.h','libs/SalesforceSDKCore/SalesforceSDKCore/Public/SFUserAccountIdentity.h','libs/SalesforceSDKCore/SalesforceSDKCore/Public/SFUserAccountManager.h','libs/SalesforceSDKCore/SalesforceSDKCore/Public/SalesforceSDKConstants.h','libs/SalesforceSDKCore/SalesforceSDKCore/Public/SalesforceSDKCoreDefines.h','libs/SalesforceSDKCore/SalesforceSDKCore/Public/SalesforceSDKManager.h','libs/SalesforceSDKCore/SalesforceSDKCore/Public/TestSetupUtils.h','libs/SalesforceSDKCore/SalesforceSDKCore/Public/UIColor+SFColors.h','libs/SalesforceSDKCore/SalesforceSDKCore/Public/UIDevice+SFHardware.h','libs/SalesforceSDKCore/SalesforceSDKCore/Public/UIScreen+SFAdditions.h'
          sdkcore.requires_arc = true
          sdkcore.prefix_header_contents = '#import "SFSDKCoreLogger.h"', '#import "SalesforceSDKConstants.h"'
      end

  end

end
